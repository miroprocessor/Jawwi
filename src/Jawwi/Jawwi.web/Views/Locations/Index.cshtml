@model List<Jawwi.web.Models.LocationsViewModel>

@{
    ViewData["Title"] = "Index";
    var currentDt = DateTime.Now;
    var fontColor = (currentDt.Hour >= 0 && currentDt.Hour < 12 ? "White" : "#12cdea");
}

<h1>Locations</h1>

<input type="text" name="name" placeholder="Type a city name" class="form-control" onkeypress="loadCountries($(this).val())" />
<br />
<div id="dvcontries"></div>
@foreach (var item in Model)
{
    @*Result should dispaly hear*@
    <div class="card mb-3" style="max-width: 100%;">
        <div class="row no-gutters">
            <div class="col-md-6">
                <div class="card-body">
                    <h5 class="card-title">@item.Location.CountryName</h5>
                    <p class="card-text">@currentDt.ToString("dddd MMM d, yyyy HH:mm")</p>
                </div>
            </div>
            <div class="col-md-4 text-right">
                <div class="card-body">
                    <p><img src="~/images/rainy-icons.svg" alt="Alternate Text" /></p>
                </div>
            </div>
            <div class="col-md-2 text-left">
                <div class="card-body">
                    <p class="card-text">22&deg;C</p>
                    <p class="card-text">9&deg;C/18&deg;C</p>
                    <p class="card-text">Rain Expectation: 20%</p>
                </div>
            </div>
        </div>
    </div>
}

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}

    <script>
        function loadCountries(query) {

            if (query.length > 3) {
                $.ajax({
            url: '@Url.Content("~/Locations/Search?query=")' + query,
            type: 'GET',
            dataType: 'Json',
            success: function (e) {
                $('#CountryCode').html('');
                for (var x = 0; x < e.length - 1;x++) {
                    $('#CountryCode').append('<option value="' + e[x].code + '">' + e[x].name + '</option>');
                        }
                    },
            error: function () {
                alert('Error!!!.');
            }
        })
            }
    }
    </script>
}

